<div id="app-container">
<div class="box">
  <div class="title0">USEPA Statistical Modeling Survey Database Query Builder</div>
  This form has two primary uses:<br>
  1) View records that match desired search criteria. To do this, enter the desired criteria below and use the 'Submit
  Query' button. This is an 'and' query, so only records matching ALL submitted criteria will be displayed in the
  'Results' table.<br>
  2) Send the information from a selected record to the survey form to facilitate creation of a new record. To do this,
  click on a record in the 'Results' table, then click the 'Send Selected Record...' button.
</div>


<div class="box">
  <!-- Beach Identifiers -->
  <div class="query-args">
    <div class="title1">Beach/Site Name:</div>
    <label for="site" hidden="true">Enter site or beach name</label>
    <input type="text" id="site" size="50" maxlength="75">

    <div class="title1">Beach Act ID (if applicable):</div>
    <label for="actId" hidden="true">Enter the beach act id if applicable</label>
    <input type="text" id="actId" size="50" maxlength="75">

    <div class="title1">State/Region:</div>
    <label for="state" hidden="true">Select a state</label>
    <select id="state" style="width:175px">
      <option value=""></option>
      <option value="AL">Alabama</option>
      <option value="AK">Alaska</option>
      <option value="AZ">Arizona</option>
      <option value="AR">Arkansas</option>
      <option value="CA">California</option>
      <option value="CO">Colorado</option>
      <option value="CT">Connecticut</option>
      <option value="DE">Delaware</option>
      <option value="DC">District Of Columbia</option>
      <option value="FL">Florida</option>
      <option value="GA">Georgia</option>
      <option value="GU">Guam</option>
      <option value="HI">Hawaii</option>
      <option value="ID">Idaho</option>
      <option value="IL">Illinois</option>
      <option value="IN">Indiana</option>
      <option value="IA">Iowa</option>
      <option value="KS">Kansas</option>
      <option value="KY">Kentucky</option>
      <option value="LA">Louisiana</option>
      <option value="ME">Maine</option>
      <option value="MD">Maryland</option>
      <option value="MA">Massachusetts</option>
      <option value="MI">Michigan</option>
      <option value="MN">Minnesota</option>
      <option value="MS">Mississippi</option>
      <option value="MO">Missouri</option>
      <option value="MT">Montana</option>
      <option value="NE">Nebraska</option>
      <option value="NV">Nevada</option>
      <option value="NH">New Hampshire</option>
      <option value="NJ">New Jersey</option>
      <option value="NM">New Mexico</option>
      <option value="NY">New York</option>
      <option value="NC">North Carolina</option>
      <option value="ND">North Dakota</option>
      <option value="OH">Ohio</option>
      <option value="OK">Oklahoma</option>
      <option value="OR">Oregon</option>
      <option value="PA">Pennsylvania</option>
      <option value="PR">Puerto Rico</option>
      <option value="RI">Rhode Island</option>
      <option value="SC">South Carolina</option>
      <option value="SD">South Dakota</option>
      <option value="TN">Tennessee</option>
      <option value="TX">Texas</option>
      <option value="UT">Utah</option>
      <option value="VT">Vermont</option>
      <option value="VA">Virginia</option>
      <option value="WA">Washington</option>
      <option value="WV">West Virginia</option>
      <option value="WI">Wisconsin</option>
      <option value="WY">Wyoming</option>
      <option value=""></option>
      <option value="AFR">Africa</option>
      <option value="AUS">Australia</option>
      <option value="CAN">Canada</option>
      <option value="CRB">Carribean</option>
      <option value="CNA">Central America</option>
      <option value="CHN">China/Southeast Asia</option>
      <option value="EEU">Eastern Europe</option>
      <option value="IND">India</option>
      <option value="MDT">Mediterranean</option>
      <option value="MEX">Mexico</option>
      <option value="MDE">Middle East</option>
      <option value="RUS">Russia</option>
      <option value="STA">South America</option>
      <option value="WEU">Western Europe</option>
    </select>

    <div class="title1">County:</div>
    <label for="county" hidden="true">Enter the county</label>
    <input type="text" id="county" size="50" maxlength="75">
  </div>

  <!-- Beach Descriptors -->
  <div class="query-args">
    <div class="title2">Beach Descriptors:</div>
    <table>
      <colgroup>
        <col width="150"><col width="150"><col width="300">
      </colgroup>
      <tbody>
      <tr>
        <label for="bdShallow" hidden="true">Beach descriptor is shallow</label>
        <td><input type="checkbox" id="bdShallow">Shallow</td>
        <label for="bdDeep" hidden="true">Beach descriptor is deep</label>
        <td><input type="checkbox" id="bdDeep">Deep</td>
      </tr>
      <tr>
        <label for="bdOpen" hidden="true">Beach descriptor is open</label>
        <td><input type="checkbox" id="bdOpen">Open</td>
        <label for="bdClosed" hidden="true">Beach descriptor is closed</label>
        <td><input type="checkbox" id="bdClosed">Closed</td>
      </tr>
      <tr>
        <label for="bdFresh" hidden="true">Beach descriptor is freshwater</label>
        <td><input type="checkbox" id="bdFresh">Freshwater</td>
        <label for="bdMarine" hidden="true">Beach descriptor is marine</label>
        <td><input type="checkbox" id="bdMarine">Marine</td>
      </tr>
      <tr>
        <td colspan="3">
          <div>
            <label for="bdOtherCheck" hidden="true">Tick this box to add other descriptors</label>
            <input type="checkbox" id="bdOtherCheck" (click)="toggleDisable('bdOther')">Other (please specify)
            <label for="bdOther" hidden="true">Enter other beach descriptors here</label>
            <input type="text" id="bdOther" size="50" maxlength="300" class="disabled">
          </div>
        </td>
      </tr>
      </tbody>
    </table>


  </div>

  <!-- Organism Modeled -->
  <div class="query-args" (click)="radioDisable($event, 'omOther')">
    <div class="title2">Modeled organism/condition:</div>
    <label for="omEcoli" hidden="true">E coli</label>
    <input type="radio" name="RV" id="omEcoli" value="1">E.coli<br>
    <label for="omEnterococci" hidden="true">Enterococci</label>
    <input type="radio" name="RV" id="omEntercocci" value="2">Enterococci<br>
    <label for="omMicrocyctin" hidden="true">Microcystin or H A B</label>
    <input type="radio" name="RV" id="omMicrocystin" value="3">Microcystin/HABs<br>
    <label for="omOtherCheck" hidden="true">Tick this box to enter an orgaism that is not listed</label>
    <input type="radio" name="RV" id="omOtherCheck" value="4">Other (please specify)
    <label for="omOther" hidden="true">Enter an organism not listed</label>
    <input type="text" id="omOther" size="50" maxlength="80" class="disabled">
  </div>

  <!-- Software Package -->
  <div class="query-args" (click)="radioDisable($event, 'spOther')">
    <div class="title2">What software package was used to develop the model?</div>
    <label for="spVB" hidden="true">Virtual beach</label>
    <input name="STAT" id="spVB" value="1" type="radio">Virtual Beach<br>
    <label for="spR" hidden="true">R</label>
    <input name="STAT" id="spR" value="2" type="radio">R<br>
    <label for="spSAS" hidden="true">S A S</label>
    <input name="STAT" id="spSAS" value="3" type="radio">SAS<br>
    <label for="spExcel" hidden="true">Excel</label>
    <input name="STAT" id="spExcel" value="4" type="radio">Excel<br>
    <label for="spOtherCheck" hidden="true">Tick this box to enter a software package not listed</label>
    <input name="STAT" id="spOtherCheck" value="5" type="radio">Other (please specify)
    <label for="spOther" hidden="true">Enter software package not listed here</label>
    <input type="text" id="spOther" size="50" maxlength="80" class="disabled">
  </div>

  <!-- Statistical Model -->
  <div class="query-args" (click)="radioDisable($event, 'smOther')">
    <div class="title2">Model Type:</div>
    <label for="smMLR" hidden="true">Multiple linear regression</label>
    <input type="radio" name="ModelType" id="smMLR" value="1">MLR (Multiple Linear Regression)<br>
    <label for="spGBM" hidden="true">Generalized boosting meathod</label>
    <input type="radio" name="ModelType" id="smGBM" value="2">GBM (Generalized Boosting Method)<br>
    <label for="spPLS" hidden="true">Partial least Squares</label>
    <input type="radio" name="ModelType" id="smPLS" value="3">PLS (Partial Least Squares)<br>
    <label for="spOtherCheck" hidden="true">Tick this box to enter a statistical model not listed</label>
    <input type="radio" name="ModelType" id="smOtherCheck" value="4">Other (please specify)
    <label for="spOther" hidden="true">Enter model not listed here</label>
    <input type="text" id="smOther" size="50" maxlength="80" class="disabled">
  </div>

  <!-- Model Use -->
  <div class="query-args">
    <div class="title2">Model Use:</div>
    <label for="muNow" hidden="true">Predicting current water quality conditions</label>
    <input type="checkbox" id="muNow">Predict current water quality conditions
    (Nowcasting)<br>
    <label for="muFore" hidden="true">Predicting future water quality conditions</label>
    <input type="checkbox" id="muFore">Predict future water quality conditions
    (Forecasting)<br>
    <label for="muResearch" hidden="true">Research</label>
    <input type="checkbox" id="muResearch">Estimate the influence of potential microbial sources or
    environmental factors (Research)
  </div>

  <!-- Independent Variables -->
  <div class="query-args">
    <div class="title2">Significant IVs:</div>
    <table>
      <colgroup>
        <col width="200"><col width="200"><col width="200">
      </colgroup>
      <tbody>
      <tr>
        <label for="ivAirTemp" hidden="true">Air Temperature</label>
        <td><input type="checkbox" id="ivAirTemp">Air Temp</td>
        <label for="ivWaterTemp" hidden="true">WaterTemp</label>
        <td><input type="checkbox" id="ivWaterTemp">Water Temp</td>
        <label for="ivDewpotin" hidden="true">Dewpoint</label>
        <td><input type="checkbox" id="ivDewpoint">Dewpoint</td>
      </tr>
      <tr>
        <label for="ivWindSpeed" hidden="true">Wind speed</label>
        <td><input type="checkbox" id="ivWindSpeed">Wind Speed/Velocity</td>
        <label for="ivCurrentSpeed" hidden="true">Current speed</label>
        <td><input type="checkbox" id="ivCurrentSpeed">Current Speed/Velocity</td>
        <label for="ivWaveHeight" hidden="true">Wave height</label>
        <td><input type="checkbox" id="ivWaveHeight">Wave Height/Direction</td>
      </tr>
      <tr>
        <label for="ivRain" hidden="true">Antecedent Rainfall</label>
        <td><input type="checkbox" id="ivRain">Antecedent Rainfall</td>
        <label for="ivTurbidity" hidden="true">Turbidity</label>
        <td><input type="checkbox" id="ivTurbidity">Turbidity</td>
        <label for="ivTribDischarge" hidden="true">Tributary discharge</label>
        <td><input type="checkbox" id="ivTribDischarge">Tributary Discharge</td>
      </tr>
      <tr>
        <label for="ivCloudCover" hidden="true">Cloud Cover</label>
        <td><input type="checkbox" id="ivCloudCover">Cloud Cover</td>
        <label for="ivUV" hidden="true">U V or PAR</label>
        <td><input type="checkbox" id="ivUV">UV/PAR</td>
        <label for="ivRelHumidity" hidden="true">Relative humidity</label>
        <td><input type="checkbox" id="ivRelHumidity">Relative Humidity</td>
      </tr>
      <tr>
        <label for="ivConductivity" hidden="true">Water conductivity</label>
        <td><input type="checkbox" id="ivConductivity">Conductivity</td>
        <label for="ivAbsorbance" hidden="true">Water absorbance</label>
        <td><input type="checkbox" id="ivAbsorbance">Water Absorbance</td>
        <label for="ivDepth" hidden="true">Water depth or tidal surge</label>
        <td><input type="checkbox" id="ivDepth">Water Depth/Tidal Stage</td>
      </tr>
      <tr>
        <label for="ivHumans" hidden="true">Humans</label>
        <td><input type="checkbox" id="ivHumans">Humans</td>
        <label for="ivBirds" hidden="true">Birds</label>
        <td><input type="checkbox" id="ivBirds">Birds</td>
        <label for="ivWildlife" hidden="true">Wildlife</label>
        <td><input type="checkbox" id="ivWildlife">Other Wildlife</td>
      </tr>
      <tr>
        <td colspan="3">
          <div>
            <label for="ivOtherCHeck" hidden="true">Tick this box to list other independent variables</label>
            <input type="checkbox" id="ivOtherCheck" (click)="toggleDisable('ivOther')">Other (please specify)
            <label for="ivOther" hidden="true">Enter other independent variables here</label>
            <input type="text" id="ivOther" size="50" maxlength="100" class="disabled">
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Evaluation Criterion -->
  <div class="query-args" (click)="radioDisable($event, 'ecOther')">
    <div class="title2">Primary evaluation criterion:</div>
    <label for="ecRsquared" hidden="true">R squared or adjusted r squared</label>
    <input type="radio" name="MDS" id="ecRsquared" value="1">R-Squared/Adjusted R-Squared<br>
    <label for="ecAicBic" hidden="true">A I C, A I C c, or B I C</label>
    <input type="radio" name="MDS" id="ecAicBic" value="2">AIC/AICc/BIC<br>
    <label for="ecSenSpecAcc" hidden="true">Sensitivity, specify, or accuracy</label>
    <input type="radio" name="MDS" id="ecSenSpecAcc" value="3">Sensitivity/Specificity/Accuracy<br>
    <label for="ecPress" hidden="true">Press or R M S E P</label>
    <input type="radio" name="MDS" id="ecPress" value="4">PRESS/RMSEP<br>
    <label for="ecOtherCheck" hidden="true">Tick this box to add evaluation criterion not listed</label>
    <input type="radio" name="MDS" id="ecOtherCheck" value="5">Other (please specify)
    <label for="ecOther" hidden="true">Enter other evaluation criterion here</label>
    <input type="text" id="ecOther" size="50" maxlength="80" class="disabled">
  </div>

  <div id="controls">
    <button id="btnSubmitQuery" (click)="submitQuery()">Submit Query</button>
    <button (click)="clearForm()">Reset Query</button>
  </div>

  <br>  <!------- END OF FORM ------->

  <div id="results-table" hidden="true">
    <h5 class="title1-centered" id="query_results_title">Query Results Table</h5>
    <div>
        <label>Show 
          <select name="queryResultsTable_length" aria-controls="queryResultsTable"  id="itemsPerPage" (click)="updatePageSize()">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select> entries</label>
    </div>
    <div>
      <table id="actual-results-table">
        <colgroup>
          <col width="150"><col width="150"><col width="150"><col width="150"><col width="150"><col width="150"><col width="50">
        </colgroup>
        <thead>
          <tr>
            <th colspan="1">Beach/Site</th>
            <th colspan="1">State/Region</th>
            <th colspan="1">County</th>
            <th colspan="1">Time Period</th>
            <th colspan="1" class="tooltip">Model Type<span
              class="tooltiptext"><div>N = Nowcasting</div><div>F = Forecasting</div><div>R = Research</div></span></th>
            <th colspan="1">Date recorded</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of searchResult | paginate: { itemsPerPage: count, currentPage: p }">
            <td colspan="1">{{e.site}}</td>
            <td colspan="1">{{e.state}}</td>
            <td colspan="1">{{e.county}}</td>
            <td colspan="1">{{e.timePeriod}}</td>
            <td colspan="1"><span *ngIf="e.muNow === 1">N</span> <span *ngIf="e.muFore === 1">F</span> <span *ngIf="e.muResearch === 1">R</span></td>
            <td colspan="1">{{e.timestamp}}</td>
            <td><button id="populateSurvey" (click)="populateSurvey()">populate survey</button></td>
          </tr>
        </tbody>
      </table>
    </div>
   
    <div id="pagination-controls" class="text-right pagination-controls">
      <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>

    <br>
  
    <div id="output-controls">
      <button onclick="exportrecords()">Save Queried Records as CSV File</button>
      <button onclick="exportcsv()">Export Entire Database to CSV File</button>
    </div>
  </div>
</div>

<br><br>

<div id="dev-controls"> <!--these are for dev only-->
  <button><a routerLink="/home">Home</a></button>
  <button><a routerLink="/survey">Survey</a></button>
  <button><a routerLink="/search">Search</a></button>
</div>
</div>