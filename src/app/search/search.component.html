<div id="app-container">
<div class="box">
  <div class="title0">USEPA Statistical Modeling Survey Database Query Builder</div>
  This form has two primary uses:<br>
  <br>
  1) View records that match desired search criteria. To do this, enter the desired criteria below and use the 'Submit
  Query' button. This is an 'and' query, so only records matching ALL submitted criteria will be displayed in the
  'Results' table.<br>
  2) Send the information from a selected record to the survey form to facilitate creation of a new record. To do this,
   click the 'Populate Survey' button.<br>
   <br>
  To enter new records manually, or to batch load records, visit the <a [routerLink]="['/survey']">survey page</a>.
</div>


<div class="box">
  <!-- Beach Identifiers -->
  <div class="query-args">
    <div class="title1">Beach/Site Name:</div>
    <label for="site" class="for-screen-reader-only">Enter site or beach name</label>
    <input type="text" id="site" size="50" maxlength="75">

    <div class="title1">Beach <a href="https://watersgeo.epa.gov/BEACON2/Beacon.html" target="_blank" class="tooltip">Act ID<span
      class="tooltiptext">Use this link to find an Act ID</span></a> or EPA Storet ID (if applicable):</div>
    <label for="actId" class="for-screen-reader-only">Enter the beach act I D or EPA Storet I D if applicable</label>
    <input type="text" id="actId" size="50" maxlength="75">

    <div class="title1">State/Region:</div>
    <label for="state" class="for-screen-reader-only">Select a state</label>
    <select id="state" style="width:175px">
      <option value=""></option>
      <option value="AL">Alabama</option>
      <option value="AK">Alaska</option>
      <option value="AZ">Arizona</option>
      <option value="AR">Arkansas</option>
      <option value="CA">California</option>
      <option value="CO">Colorado</option>
      <option value="CT">Connecticut</option>
      <option value="DE">Delaware</option>
      <option value="DC">District Of Columbia</option>
      <option value="FL">Florida</option>
      <option value="GA">Georgia</option>
      <option value="GU">Guam</option>
      <option value="HI">Hawaii</option>
      <option value="ID">Idaho</option>
      <option value="IL">Illinois</option>
      <option value="IN">Indiana</option>
      <option value="IA">Iowa</option>
      <option value="KS">Kansas</option>
      <option value="KY">Kentucky</option>
      <option value="LA">Louisiana</option>
      <option value="ME">Maine</option>
      <option value="MD">Maryland</option>
      <option value="MA">Massachusetts</option>
      <option value="MI">Michigan</option>
      <option value="MN">Minnesota</option>
      <option value="MS">Mississippi</option>
      <option value="MO">Missouri</option>
      <option value="MT">Montana</option>
      <option value="NE">Nebraska</option>
      <option value="NV">Nevada</option>
      <option value="NH">New Hampshire</option>
      <option value="NJ">New Jersey</option>
      <option value="NM">New Mexico</option>
      <option value="NY">New York</option>
      <option value="NC">North Carolina</option>
      <option value="ND">North Dakota</option>
      <option value="OH">Ohio</option>
      <option value="OK">Oklahoma</option>
      <option value="OR">Oregon</option>
      <option value="PA">Pennsylvania</option>
      <option value="PR">Puerto Rico</option>
      <option value="RI">Rhode Island</option>
      <option value="SC">South Carolina</option>
      <option value="SD">South Dakota</option>
      <option value="TN">Tennessee</option>
      <option value="TX">Texas</option>
      <option value="UT">Utah</option>
      <option value="VT">Vermont</option>
      <option value="VA">Virginia</option>
      <option value="WA">Washington</option>
      <option value="WV">West Virginia</option>
      <option value="WI">Wisconsin</option>
      <option value="WY">Wyoming</option>
      <option value=""></option>
      <option value="AFR">Africa</option>
      <option value="AUS">Australia</option>
      <option value="CAN">Canada</option>
      <option value="CRB">Carribean</option>
      <option value="CNA">Central America</option>
      <option value="CHN">China/Southeast Asia</option>
      <option value="EEU">Eastern Europe</option>
      <option value="IND">India</option>
      <option value="MDT">Mediterranean</option>
      <option value="MEX">Mexico</option>
      <option value="MDE">Middle East</option>
      <option value="RUS">Russia</option>
      <option value="STA">South America</option>
      <option value="WEU">Western Europe</option>
    </select>

    <div class="title1">County:</div>
    <label for="county" class="for-screen-reader-only">Enter the county</label>
    <input type="text" id="county" size="50" maxlength="75">
  </div>

  <!-- Beach Descriptors -->
  <div class="query-args">
    <div class="title2">Beach Descriptors:</div>
    <table>
      <colgroup>
        <col width="150"><col width="450">
      </colgroup>
      <tbody>
      <tr>
        <td><label><input type="checkbox" id="bdShallow">Shallow</label></td>
        <td><label><input type="checkbox" id="bdDeep">Deep</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="bdOpen">Open</label></td>
        <td><label><input type="checkbox" id="bdClosed">Closed</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="bdFresh">Freshwater</label></td>
        <td><label><input type="checkbox" id="bdMarine">Marine</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="bdPier">Pier</label></td>
        <td><label><input type="checkbox" id="bdDrain">Storm Drain/River Outlet</label><br></td>
      </tr>
      <tr>
        <td colspan="2">
          <div>
            <label><input type="checkbox" id="bdOtherCheck" (click)="toggleDisable('bdOther')">Other (please specify) </label>
            <label for="bdOther" class="for-screen-reader-only">Enter other beach descriptors here</label>
            <input type="text" id="bdOther" size="50" maxlength="300" class="disabled" disabled="true">
          </div>
        </td>
      </tr>
      </tbody>
    </table>


  </div>

  <!-- Organism Modeled -->
  <div class="query-args">
    <div class="title2">Modeled organism/condition:</div>
    <label><input type="radio" id="omEcoli" name="OM" value="1" (click)="radioDisable($event, 'omOther')">E.coli</label><br>
    <label><input type="radio" id="omEntercocci" name="OM" value="2" (click)="radioDisable($event, 'omOther')">Enterococci</label><br>
    <label><input type="radio" id="omMicrocystin" name="OM" value="3" (click)="radioDisable($event, 'omOther')">Microcystin/HABs</label><br>
    <label><input type="radio" id="omOtherCheck" name="OM" value="4" (click)="radioDisable($event, 'omOther')">Other (please specify) </label>
    <label for="omOther" class="for-screen-reader-only">Enter an organism not listed here</label>
    <input type="text" id="omOther" size="50" maxlength="80" class="disabled" disabled="true">
  </div>

  <!-- Software Package -->
  <div class="query-args">
    <div class="title2">What software package was used to develop the model?</div>
    <label><input type="radio" id="spVB" name="SP" value="1" (click)="radioDisable($event, 'spOther')">Virtual Beach</label><br>
    <label><input type="radio" id="spR" name="SP" value="2" (click)="radioDisable($event, 'spOther')">R</label><br>
    <label><input type="radio" id="spSAS" name="SP" value="3" (click)="radioDisable($event, 'spOther')">SAS</label><br>
    <label><input type="radio" id="spExcel" name="SP" value="4" (click)="radioDisable($event, 'spOther')">Excel</label><br>
    <label><input type="radio" id="spOtherCheck" name="SP" value="5" (click)="radioDisable($event, 'spOther')">Other (please specify) </label>
    <label for="spOther" class="for-screen-reader-only">Enter software package not listed here</label>
    <input type="text" id="spOther" size="50" maxlength="80" class="disabled" disabled="true">
  </div>

  <!-- Statistical Model -->
  <div class="query-args">
    <div class="title2">Model Type:</div>
    <label><input type="radio" id="smMLR" name="SM" value="1" (click)="radioDisable($event, 'smOther')">MLR (Multiple Linear Regression)</label><br>
    <label><input type="radio" id="smGBM" name="SM" value="2" (click)="radioDisable($event, 'smOther')">GBM (Generalized Boosting Method)</label><br>
    <label><input type="radio" id="smPLS" name="SM" value="3" (click)="radioDisable($event, 'smOther')">PLS (Partial Least Squares)</label><br>
    <label><input type="radio" id="smOtherCheck" name="SM" value="4" (click)="radioDisable($event, 'smOther')">Other (please specify) </label>
    <label for="spOther" class="for-screen-reader-only">Enter model not listed here</label>
    <input type="text" id="smOther" size="50" maxlength="80" class="disabled" disabled="true">
  </div>

  <!-- Model Use -->
  <div class="query-args">
    <div class="title2">Model Use:</div>
    <label><input type="checkbox" id="muNow">Predict current water quality conditions (Nowcasting)</label><br>
    <label><input type="checkbox" id="muFore">Predict future water quality conditions (Forecasting)</label><br>
    <label><input type="checkbox" id="muResearch">Estimate the influence of potential microbial sources or environmental factors (Research)</label>
  </div>

  <!-- Independent Variables -->
  <div class="query-args">
    <div class="title2">Significant IVs:</div>
    <table>
      <colgroup>
        <col width="200"><col width="200"><col width="200">
      </colgroup>
      <tbody>
      <tr>
        <td><label><input type="checkbox" id="ivAirTemp">Air Temp</label></td>
        <td><label><input type="checkbox" id="ivWaterTemp">Water Temp</label></td>
        <td><label><input type="checkbox" id="ivDewpoint">Dewpoint</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="ivWindSpeed">Wind Characteristics</label></td>
        <td><label><input type="checkbox" id="ivCurrentSpeed">Current Characteristics</label></td>
        <td><label><input type="checkbox" id="ivWaveHeight">Wave Characteristics</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="ivRain">Antecedent Rainfall</label></td>
        <td><label><input type="checkbox" id="ivTurbidity">Turbidity</label></td>
        <td><label><input type="checkbox" id="ivTribDischarge">Tributary Discharge</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="ivCloudCover">Cloud Cover</label></td>
        <td><label><input type="checkbox" id="ivUV">UV/PAR</label></td>
        <td><label><input type="checkbox" id="ivRelHumidity">Relative Humidity</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="ivConductivity">Conductivity</label></td>
        <td><label><input type="checkbox" id="ivAbsorbance">Water Absorbance</label></td>
        <td><label><input type="checkbox" id="ivDepth">Water Depth/Tidal Stage</label></td>
      </tr>
      <tr>
        <td><label><input type="checkbox" id="ivHumans">Humans</label></td>
        <td><label><input type="checkbox" id="ivBirds">Birds</label></td>
        <td><label><input type="checkbox" id="ivWildlife">Other Wildlife</label></td>
      </tr>
      <tr>
        <td colspan="3">
          <div>
            <label><input type="checkbox" id="ivOtherCheck" (click)="toggleDisable('ivOther')">Other (please specify) </label>
            <label for="ivOther" class="for-screen-reader-only">Enter other independent variables here</label>
            <input type="text" id="ivOther" size="50" maxlength="100" class="disabled" disabled="true">
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Evaluation Criterion -->
  <div class="query-args">
    <div class="title2">Primary evaluation criterion:</div>
    <label><input type="checkbox" id="ecRsquared" >R-Squared/Adjusted R-Squared</label><br>
    <label><input type="checkbox" id="ecAicBic" >AIC/AICc/BIC</label><br>
    <label><input type="checkbox" id="ecSenSpecAcc" >Sensitivity/Specificity/Accuracy</label><br>
    <label><input type="checkbox" id="ecPress" >PRESS/RMSEP</label><br>
    <label><input type="checkbox" id="ecOtherCheck" (click)="toggleDisable('ecOther')">Other (please specify) </label>
    <label for="ecOther" hidden="true">Enter other evaluation criterion here</label>
    <input type="text" id="ecOther" size="50" maxlength="80" class="disabled" disabled="true">
  </div>

  <div id="controls">
    <button id="btnSubmitQuery" (click)="submitQuery()">Submit Query</button>
    <button (click)="clearForm()">Reset Query</button>
  </div>

  <br>  <!------- END OF FORM ------->

  <div id="results-table" hidden="true">
    <h5 class="title1-centered" id="query_results_title">Query Results Table</h5>
    <div>
        <label>Show 
          <select name="queryResultsTable_length" aria-controls="queryResultsTable"  id="itemsPerPage" (click)="updatePageSize()">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select> entries</label>
    </div>
    <div>
      <table id="actual-results-table">
        <colgroup>
          <col width="150"><col width="150"><col width="150"><col width="150"><col width="150"><col width="150"><col width="50">
        </colgroup>
        <thead>
          <tr>
            <th colspan="1">Beach/Site</th>
            <th colspan="1">State/Region</th>
            <th colspan="1">County</th>
            <th colspan="1">Time Period</th>
            <th colspan="1" class="tooltip">Model Type<span
              class="tooltiptext"><div>N = Nowcasting</div><div>F = Forecasting</div><div>R = Research</div></span></th>
            <th colspan="1">Date recorded</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="searchResult.length !==  0">
          <tr *ngFor="let e of searchResult | paginate: { itemsPerPage: count, currentPage: p }">
            <td colspan="1">{{e.site}}</td>
            <td colspan="1">{{e.state}}</td>
            <td colspan="1">{{e.county}}</td>
            <td colspan="1">{{e.timePeriod}}</td>
            <td colspan="1"><span *ngIf="e.muNow === 1">N</span> <span *ngIf="e.muFore === 1">F</span> <span *ngIf="e.muResearch === 1">R</span></td>
            <td colspan="1">{{e.dateEntered}}</td>
            <!--<td><button id="populateSurvey" (click)="populateSurvey(e)">Populate Survey</button></td>-->
            <td><a [routerLink]="['/survey']" [state]="{ record: e }">Populate Survey</a></td>
          </tr>
          </ng-container>
        </tbody>
      </table>
      <h5 *ngIf="searchResult.length === 0" class="title2-centered"><br>No Results found!</h5>
    </div>
   
    <div id="pagination-controls" class="text-right pagination-controls">
      <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>

    <br>
  
    <div id="output-controls">
      <button (click)="saveQuery()">Save Queried Records as CSV File</button>
      <button (click)="saveDB()">Export Entire Database to CSV File</button>
    </div>
    <br><br>
  </div>
</div>
</div>